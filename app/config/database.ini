# create_database_config.py
import os
from configparser import ConfigParser

def create_database_config():
    """Crea el archivo de configuración database.ini"""
    
    # Definir la configuración
    config = ConfigParser()
    
    # Sección principal [postgresql]
    config['postgresql'] = {
        'host': 'localhost',
        'database': 'formagestpro_db',
        'user': 'postgres',
        'password': 'Despachanet',
        'port': '5432',
        'min_connections': '1',
        'max_connections': '10'
    }
    
    # Sección [development]
    config['development'] = {
        'host': 'localhost',
        'database': 'formagestpro_dev',
        'user': 'postgres',
        'password': 'Despachanet',
        'port': '5432'
    }
    
    # Sección [production] - solo plantilla
    config['production'] = {
        'host': 'produccion-db.example.com',
        'database': 'formagestpro_prod',
        'user': 'formagestpro_user',
        'password': 'TU_CONTRASEÑA_SEGURA_AQUÍ',
        'port': '5432',
        'sslmode': 'require'
    }
    
    # Sección [testing]
    config['testing'] = {
        'host': 'localhost',
        'database': 'formagestpro_test',
        'user': 'postgres',
        'password': 'Despachanet',
        'port': '5432'
    }
    
    # Sección [application]
    config['application'] = {
        'app_name': 'FormaGestPro_MVC',
        'app_version': '1.0.0',
        'environment': 'development'
    }
    
    # Crear directorio si no existe
    config_dir = 'app/config'
    os.makedirs(config_dir, exist_ok=True)
    
    # Guardar archivo
    config_path = os.path.join(config_dir, 'database.ini')
    with open(config_path, 'w') as configfile:
        config.write(configfile)
    
    print(f"✓ Archivo de configuración creado en: {config_path}")
    print("¡Recuerda cambiar las contraseñas para producción!")
    
    # También crear .gitignore
    gitignore_path = os.path.join(config_dir, '.gitignore')
    with open(gitignore_path, 'w') as f:
        f.write("# Proteger archivos de configuración con credenciales\n")
        f.write("database.ini\n")
        f.write("*.ini\n")
        f.write("secrets/\n")
        f.write("*.secret\n")
    
    print(f"✓ Archivo .gitignore creado en: {gitignore_path}")
    
    return config_path

if __name__ == "__main__":
    create_database_config()